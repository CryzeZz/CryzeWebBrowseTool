!function(){function i(e,t,o,n){console.log("before",e),e=chrome.runtime.getURL(e),console.log("after",e),l(e,t,o,n)}function l(e,t,o,n){var i=document.createElement("script");i.type="text/javascript","string"==typeof o?i.innerHTML=o:(i.src=e,i.charset=t),"string"==typeof n&&(i.id=n),document.getElementsByTagName("head")[0].appendChild(i)}function r(t,o,e,n,i){e=e||100,i=i||50;var l=0,r=setInterval(function(){var e=$(t);l++,(e[0]||i<l)&&(clearInterval(r),n&&0<n?setTimeout(function(){o(e)},n):o(e))},e)}var a=!1,s=!1;function n(e){var t,o,n;console.log(e,window.location.href),e.info.frameUrl&&e.info.frameUrl!=window.location.href||!e.info.frameUrl&&e.info.pageUrl&&e.info.pageUrl!=window.location.href?console.log("not this frame"):"exprotDatagrid"==e.contextMenuId?r(".datagrid-view>table,.bootstrap-table>.fixed-table-container>.fixed-table-body>.table,.x-grid-panel",function(e){0<e.length&&(a?l("","","my_chrome_ext_dgexport_addBtn()"):(i("lib/xlsx/Blob.js","utf-8"),i("lib/xlsx/FileSaver.js","utf-8"),i("lib/xlsx/xlsx.core.min.js","utf-8"),i("lib/xlsx/easyui.xlsx.js","utf-8"),i("lib/xlsx/bootstrapTable.xlsx.js","utf-8"),i("lib/xlsx/extjs.xlsx.js","utf-8"),i("lib/xlsx/my_chrome_ext_exportDatagrid_local.js","utf-8"),a=!0))},100,0,1):"share2QRCode"==e.contextMenuId?(t="text",o="","string"==typeof e.info.selectionText&&""!=e.info.selectionText?o=e.info.selectionText:t="string"==typeof e.info.linkUrl&&""!=e.info.linkUrl?(o=e.info.linkUrl,"link"):"string"==typeof e.info.srcUrl&&""!=e.info.srcUrl?(o=e.info.srcUrl,e.info.mediaType):(o=window.location.href,"link"),""!=o&&(0==$("#my_chrome_ext_modal").length&&$(`
                        <div id="my_chrome_ext_modal" style="width:500px;height:400px;display:none;">
                            <div class="my_chrome_ext_modal_title"><span>二维码</span><a href="javascript:void(0);" class="simplemodal-close">X</a> </div>
                        
                            <div class="my_chrome_ext_modal_main">
                                <div class="my_chrome_ext_modal_content">
                                    
                                </div>
                            </div>
                        </div>`).appendTo("body"),$("#my_chrome_ext_modal").modal({opacity:30}),(n=$("#my_chrome_ext_modal").find(".my_chrome_ext_modal_content")).empty(),(n=$("<div></div>").appendTo(n).qrcode({text:function(e){for(var t,o="",n=e.length,i=0;i<n;i++)1<=(t=e.charCodeAt(i))&&t<=127?o+=e.charAt(i):o=2047<t?(o=(o+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(o+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return o}(o)})).height(n.find("canvas").height()).width(n.find("canvas").width()).css("margin","10px auto"),console.log({type:t,text:o}))):"exportHtmlTable"==e.contextMenuId&&r("table:visible",function(e){0<e.length&&(s?l("","","my_chrome_ext_tableexport_addBtn()"):(i("lib/xlsx/Blob.js","utf-8"),i("lib/xlsx/FileSaver.js","utf-8"),i("lib/xlsx/xlsx.core.min.js","utf-8"),l("","",'var my_chrome_ext_jquery_url="'+chrome.runtime.getURL("lib/jquery/jquery-1.8.0.min.js")+'";'),i("lib/xlsx/my_chrome_ext_exportHtmlTable_local.js","utf-8"),s=!0))},100,0,1)}chrome.extension.onMessage.addListener(function(e,t,o){e.type&&"onContextMenu"==e.type&&n.call(this,e,t,o)}),$(function(){location.href})}();